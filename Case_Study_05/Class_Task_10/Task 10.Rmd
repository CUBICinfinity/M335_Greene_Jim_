---
title: "Task 10"
author: "Jim Greene"
date: "May 24, 2018"
output: 
  html_document:
    theme: readable
    keep_md: true
    code_folding: none
---

```{r setup, include=FALSE}
library(tidyverse)
dart <- read_csv("https://raw.githubusercontent.com/byuistats/data/master/Dart_Expert_Dow_6month_anova/Dart_Expert_Dow_6month_anova.csv")

# dart_rds <- read_rds(gzcon(url("https://github.com/byuistats/data/blob/master/Dart_Expert_Dow_6month_anova/Dart_Expert_Dow_6month_anova.RDS?raw=true")))
```
### Data Wrangling


</br>

Tidying the data
```{r, eval = T}
dart <- filter(dart, contest_period != "Average") %>%
  separate(contest_period, into = c("junk", "period"), sep = "-") %>%
  select(-junk) %>% 
  separate(period, c("month_end", "year_end"), sep = -4) %>% 
  write_rds("darts.rds")

read_rds("darts.rds")
```
</br>There was an "Average" entry for contest_period for each variable (DARTS, DJIA, PROS). There is no useful place for those rows so I removed them. All the other rows have a hyphen before the usefull information, which made things easier.


```{r, eval = F, echo =F}
#Alternate code that I didn't use: This keeps rows with "Average" There is a problem with splitting at the end the way I did it.
dart %>%
  separate(contest_period, into = c("junk", "period"), sep = "-", fill = "left") %>% 
  select(-junk) %>% 
  separate(period, c("month_end", "year_end"), sep = -4) %>% 
  write_rds("darts.rds")
```

</br>

Plotting by year
```{r}
dart %>% 
  ggplot(aes(year_end, value)) +
  geom_boxplot(fill = "#666666")
```
</br>This is a simple boxplot to show the returns by year. I didn't try to add more information than needed.

</br>

Spreading the data (if I needed to do that)
```{r}
dart %>%
  group_by(value) %>% 
  do(tibble::rowid_to_column(.)) %>% 
  spread(key = year_end, value = month_end) %>% 
  select(-rowid)
```
Aparently tidyr::spread has a problem with duplicate values because it tries to condense rows as much as possible. The value column (Which I would rather call "return" and not "value". I could have used colnames(dart)[4] <- "return" to do that.) has just a couple duplicates. My code was the best solution I found based on reading about the problem online.
